"use strict";function success(pos){var crd=pos.coords;console.log("Your current position is:"),console.log("Latitude : "+crd.latitude),console.log("Longitude: "+crd.longitude),console.log("More or less "+crd.accuracy+" meters."),document.getElementById("position").innerHTML=crd.latitude+"/"+crd.longitude}function error(err){console.warn("ERROR("+err.code+"): "+err.message)}function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2){var dLat=deg2rad(lat2-lat1),dLon=deg2rad(lon2-lon1),a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(deg2rad(lat1))*Math.cos(deg2rad(lat2))*Math.sin(dLon/2)*Math.sin(dLon/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}function deg2rad(deg){return deg*(Math.PI/180)}var params={public_key:"gWKneA_PyJXFoX3AYF7wc3d",auth_params:{username:"admin",payload:"cb8b6d40cdd8374049e47bbce9df5f63f69ed2701ce834eada7979a56014fc08"}},socketize=new Socketize.client(params);document.getElementById("post-btn").onclick=function(){socketize.publish("splatterwall",{name:"Rob",city:"Amsterdam"})},socketize.subscribe("splatterwall",function(){splatter.receiveSplat(window.event)});var options={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(success,error,options);var splatter=splatter||{};splatter.canvas=document.getElementById("canvas"),splatter.ctx=canvas.getContext("2d"),splatter.focused=!1,splatter.clicked=!1,splatter.active=!1,splatter.shadow=document.createElement("canvas"),splatter.sctx=splatter.shadow.getContext("2d"),splatter.appWallSwitch=window.matchMedia("(min-width: 767px)"),splatter.items=[],splatter.mouse={x:0,y:0,dx:0,dy:0,px:0,py:0},splatter.options={scatter:.5,gravity:.2,consistency:.04,size:1,pollock:!0,burst:!0,shade:!0},splatter.canvas.width=splatter.shadow.width=window.innerWidth,splatter.canvas.height=splatter.shadow.height=window.innerHeight,splatter.sctx.fillStyle=splatter.ctx.fillStyle="#aa0707",window.addEventListener("load",function(){splatter.init(),splatter.appWallSwitch.addListener(splatter.init)},!1),splatter.init=function(){splatter.appWallSwitch.matches?splatter.active=!0:splatter.active=!1,window.addEventListener("resize",function(){splatter.canvas.width=splatter.shadow.width=window.innerWidth,splatter.canvas.height=splatter.shadow.height=window.innerHeight},!1),splatter.drawloop()},splatter.drawloop=function(){splatter.active&&requestAnimationFrame(splatter.drawloop),splatter.ctx.clearRect(0,0,splatter.canvas.width,splatter.canvas.height),splatter.drawsplat(splatter.items)},splatter.splat=function(x,y,arr){for(var i=0;i<30;i++){var s=Math.random()*Math.PI*splatter.options.size,dirx=(Math.random()<.5?3:-3)*(3*Math.random())*splatter.options.scatter,diry=(Math.random()<.5?3:-3)*(3*Math.random())*splatter.options.scatter;arr.push({x:x,y:y,dx:dirx+splatter.mouse.dx,dy:diry+splatter.mouse.dy,size:s})}},splatter.drawsplat=function(arr){for(var i=arr.length;i--;){var t=arr[i],x=t.x,y=t.y,s=t.size;splatter.circle(x,y,s,splatter.ctx),t.dy-=splatter.options.gravity,t.x-=t.dx,t.y-=t.dy,t.size-=.05,(arr[i].size<.3||Math.random()<splatter.options.consistency)&&(splatter.circle(x,y,s,splatter.sctx),arr.splice(i,1))}splatter.ctx.drawImage(splatter.shadow,0,0)},splatter.circle=function(x,y,s,c){c.beginPath(),c.arc(x,y,5*s,0,2*Math.PI,!1),c.fill(),c.closePath()},splatter.receiveSplat=function(){splatter.clicked=!0,splatter.options.burst&&setTimeout(function(){splatter.clicked=!1},100),splatter.mouse.x=(Math.random()*splatter.canvas.width).toFixed(),splatter.mouse.y=(Math.random()*splatter.canvas.height).toFixed();var redtone=splatter.options.shade?"rgb("+(130+(105*Math.random()|0))+",0,0)":"#aa0707",randomtone="#"+Math.floor(16777215*Math.random()).toString(16);splatter.sctx.fillStyle=splatter.ctx.fillStyle=splatter.options.pollock?randomtone:redtone,splatter.splat(splatter.mouse.x,splatter.mouse.y,splatter.items)};